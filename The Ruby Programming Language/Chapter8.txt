Глава 8 - Отражение и метапрограммирование.

Отражение, которое также называют интроспекцией, или самоанализом, определяет
способность программы исследовать свое состояние и свою структуру.

В самом простом определении метапрограммирование - это создание программ,
помогающих создавать другие программы. Иначе говоря, метапрограммирование
представляет собой набор технологических приемов, предназначенных для
расширения синтаксиса Ruby с целью облегчения процесса программирования.
-------------------------------------------------------------------------------
Глава 8.1 - Типы, классы и модули.

Найболее часто используются методы отражения, определяющие тип объекта, то есть
экземпляром какого класса он является и на какие методы реагирует.

o.class
  Возвращает класс объекта o

o.superclass
  Возвращает надкласс объекта o

o.instance_of? c
  Определяет, верно ли, что o.class == c

o.is_a? c
  Определяет, является ли o экземпляром класса c или любого из его подклассов

o.kind_of? c
  Является синонимом для is_a?

o === c
  Для любого класса или модуля c определяет, является ли истинным выражение
  o.is_a? c

o.respond_to? name
  Определяет, имеет ли объект o открытый или защищенный метод с указанным именем. Если ему в качестве второго аргумента передать true, то проверяет так
  же наличие закрытого метода.
-------------------------------------------------------------------------------
Глава 8.10.1 - Определение методов с помощью class_eval.

Методы ниже по характеру работы похожи на attr_reader и attr_accessor,
приводятся чтобы показать порядок реализации подобных методов.

class Module
  private

  def readonly(*syms)
    return if syms.size == 0
    code = ""
    syms.each do |s|
      code << "def #{s}; @#{s}; end\n"
    end
    class_eval code
  end

  def readwrite(*syms)
    return if syms.size == 0
    code = ""
    syms.each do |s|
      code << "def #{s}; @#{s}; end\n"
      code << "def #{s}=(value); @#{s} = value; end\n"
    end
    class_eval code
  end
end
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------